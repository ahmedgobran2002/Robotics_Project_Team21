#include <Servo.h>

Servo servo1;  // Servo for joint 1 (q1)
Servo servo2;  // Servo for joint 2 (q2)
Servo servo3;  // Servo for joint 3 (q3)
Servo servo4;  // Servo for joint 4 (q4)

// Adjust this value to match the number of points in your trajectory
// const int totalPoints = 104;  // Set this to the actual number of points in qs

// Define the trajectory (4D array for q1, q2, q3, q4)
// You need to make sure this array has the same number of rows as `totalPoints`
float qs[55][4] = {
    {0, -16.9908, 0, 0},
    {0.1624, -17.5712, 0, 0},
    {0.3316, -18.1717, 0, 0},
    {0.5079, -18.7931, 0, 0},
    {0.6919, -19.4366, 0, 0},
    {0.8841, -20.1029, 0, 0},
    {1.0850, -20.7933, 0, 0},
    {1.2952, -21.5087, 0, 0},
    {1.5154, -22.2503, 0, 0},
    {1.7463, -23.0192, 0, 0},
    {1.9886, -23.8167, 0, 0},
    {2.2433, -24.6440, 0, 0},
    {2.5114, -25.5024, 0, 0},
    {2.7937, -31.3435, 14.8884, 0},
    {3.0917, -36.5270, 27.8772, 0},
    {3.4064, -40.2423, 36.4606, 0},
    {3.7395, -43.3969, 43.3337, 0},
    {4.0925, -46.2342, 49.2119, 0},
    {4.4672, -48.8637, 54.4124, 0},
    {4.8656, -51.3459, 59.1081, 0},
    {5.2901, -53.7189, 63.4048, 0},
    {5.7432, -56.0085, 67.3726, 0},
    {6.2279, -58.2334, 71.0598, 0},
    {6.7475, -60.4073, 74.5015, 0},
    {7.3058, -62.5412, 77.7231, 0},
    {7.9072, -64.6434, 80.7438, 0},
    {8.5567, -66.7210, 83.5779, 0},
    {9.2602, -68.7793, 86.2361, 0},
    {10.0245, -70.8228, 88.7263, 0},
    {10.8574, -72.8549, 91.0542, 0},
    {11.7683, -74.8782, 93.2238, 0},
    {12.7681, -76.8943, 95.2374, 0},
    {13.8697, -78.9039, 97.0965, 0},
    {15.0886, -80.9068, 98.8013, 0},
    {16.4434, -82.9016, 100.3515, 0},
    {17.9562, -84.8858, 101.7460, 0},
    {19.6538, -86.8553, 102.9836, 0},
    {21.5688, -88.8045, 104.0625, 0},
    {23.7406, -90.7258, 104.9809, 0},
    {26.2168, -92.6093, 105.7372, 0},
    {29.0546, -94.4421, 106.3297, 0},
    {32.3222, -96.2083, 106.7569, 0},
    {36.0983, -97.8878, 107.0179, 0},
    {40.4700, -99.4559, 107.1119, 0},
    {45.5256, -100.8831, 107.0387, 0},
    {51.3402, -102.1343, 106.7985, 0},
    {57.9499, -103.1706, 106.3918, 0},
    {65.3177, -103.9518, 105.8198, 0},
    {73.3008, -104.4421, 105.0838, 0},
    {81.6408, -104.6169, 104.1854, 0},
    {90.0000, -104.4694, 103.1264, 0}
};


void setup() {
  // Attach servos to the corresponding pins
  servo1.attach(9);
  servo2.attach(10);
  servo3.attach(11);
  servo4.attach(12);

  // Initialize servos to the first position
  servo1.write(map(qs[0][0], -90, 90, 0, 180));
  servo2.write(map(qs[0][1], -90, 90, 0, 180));
  servo3.write(map(qs[0][2], -90, 90, 0, 180));
  servo4.write(map(qs[0][3], -90, 90, 0, 180));
  
  delay(1000);  // Wait for the servos to reach the initial position

  for (int i = 1; i < 55; i++) {
    // Move servos to the next point in the trajectory
    servo1.write(map(qs[i][0], -90, 90, 0, 180));
    servo2.write(map(qs[i][1], -90, 90, 0, 180));
    servo3.write(map(qs[i][2], -90, 90, 0, 180));
    servo4.write(map(qs[i][3], -90, 90, 0, 180));

    delay(100);  // Wait 100ms between each trajectory point
  }
}

void loop() {
  
}
